(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["perfil"],{"8e4a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.account?a("div",[a("b-container",{staticClass:"pt-5"},[a("b-row",{staticClass:"justify-content-md-center pb-3"},[a("b-col",{attrs:{md:"6"}},[a("router-link",{attrs:{to:"/admin/cuentas"}},[a("b-icon-arrow-left"),t._v(" Ir al listado ")],1)],1)],1),a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{md:"6"}},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",[a("label",[t._v("Cuenta:")]),a("b-form-input",{model:{value:t.account.name,callback:function(e){t.$set(t.account,"name",e)},expression:"account.name"}})],1)],1),a("b-col",[a("b-form-group",[a("label",[t._v("Email:")]),a("b-form-input",{model:{value:t.account.email,callback:function(e){t.$set(t.account,"email",e)},expression:"account.email"}})],1)],1),a("b-col",[a("b-form-group",[a("label",[t._v("Teléfono:")]),a("b-form-input",{model:{value:t.account.phone,callback:function(e){t.$set(t.account,"phone",e)},expression:"account.phone"}})],1)],1)],1),a("b-row",[a("b-col",[a("label",[t._v("Estado:")]),a("b-form-select",{on:{change:t.getCities},model:{value:t.account.state,callback:function(e){t.$set(t.account,"state",e)},expression:"account.state"}},t._l(t.catalogs.states,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("b-col",[a("label",[t._v("Ciudad:")]),a("b-form-select",{model:{value:t.account.city,callback:function(e){t.$set(t.account,"city",e)},expression:"account.city"}},t._l(t.cities,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("b-row",{staticClass:"pt-3 pb-3"},[a("b-col",[a("b-button",{attrs:{disabled:"",type:"submit"}},[t._v("Guardar")])],1)],1)],1)],1)],1)],1)],1):t._e()},s=[],n=a("9a5b"),c=a("aca0"),i=a("2f62"),r={data:()=>({account:null,cities:[]}),computed:{...Object(i["c"])(["auth","catalogs"])},methods:{...Object(i["b"])({getStates:"catalogs/getStates",getPositions:"catalogs/getPositions",createComplaint:"complaints/create"}),async getAccount(t){const{data:e}=await Object(n["b"])(t);return e.data},async getCities(t){const{data:e}=await Object(c["a"])(t);this.cities=e.data}},async mounted(){const t=this.$route.params.id;try{this.account=await this.getAccount(t),await this.getStates(),await this.getCities(this.account.state),await this.getPositions()}catch(e){this.$snack.danger({text:e.message})}}},l=r,u=a("2877"),m=Object(u["a"])(l,o,s,!1,null,null,null);e["default"]=m.exports},"95fd":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("AddAccound",{on:{newAccount:t.newAccount,error:t.onError}}),a("b-container",[a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"p-3"},[a("h1",[t._v("Usuarios")]),a("b-pagination",{attrs:{"total-rows":t.total,"per-page":t.limit,"first-text":"Primera","prev-text":"Ant.","next-text":"Sig.","last-text":"Última",align:"right"},on:{change:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("b-table",{attrs:{busy:t.fetching,responsive:"",striped:"",hover:"",items:t.rows,fields:t.fields,"per-page":t.limit,"caption-top":""},on:{"row-dblclicked":t.onClickRow},scopedSlots:t._u([{key:"table-caption",fn:function(){return[a("b-button",{on:{click:t.openNewAccountModal}},[t._v(" Agregar cuenta ")])]},proxy:!0},{key:"cell(acciones)",fn:function(e){return["ADMIN"!==t.auth.user.role.code||t.fetching||"Root"===e.item.nombre?t._e():a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return a.preventDefault(),t.deleteItem(e.index)}}},[a("b-icon-trash")],1)]}}])})],1)])],1)],1)],1)},s=[];a("780a"),a("b383");var n=a("aca0"),c=a("2f62"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal--login",attrs:{name:"newAccount",adaptive:!0,scrollable:!0,height:"auto"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"p-3"},[a("h3",[t._v("Crear cuenta")]),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("b-form-group",[a("label",[t._v("Nombre de la cuenta")]),a("b-form-input",{model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("b-form-group",[a("label",[t._v("Nombre del usuario administrador")]),a("b-form-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",[a("label",[t._v("Email del administrador:")]),a("b-form-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",[a("label",[t._v("Teléfono del administrador:")]),a("b-form-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),a("b-form-group",[a("label",[t._v("Contraseña:")]),a("b-form-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-row",[a("b-col",[a("b-form-group",[a("label",[t._v("Estado:")]),a("b-form-select",{on:{change:t.getCities},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.catalogs.states,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("b-col",[a("b-form-group",[a("label",[t._v("Ciudad:")]),a("b-form-select",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},t._l(t.cities,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),a("b-row",[a("b-col",{staticStyle:{"text-align":"right"},attrs:{md:"6","offset-md":"6"}},[a("b-button",{attrs:{type:"submit"}},[t._v("Guardar")])],1)],1)],1)],1)])])])},r=[],l=a("9a5b");const u={name:null,email:null,phone:"+52",account:null,city:null,state:null,password:null};var m={data:()=>({form:u,cities:[]}),computed:{...Object(c["c"])(["auth","catalogs"])},methods:{async getCities(t){const{data:e}=await Object(n["a"])(t);this.cities=e.data},async submit(t){try{const{data:e}=await Object(l["a"])({name:this.form.name,email:this.form.email,phone:this.form.phone,account:this.form.account,city:this.form.city,state:this.form.state,password:this.form.password});t.target.reset(),this.$emit("newAccount",e.data)}catch(e){this.$emit("error",e)}}}},d=m,b=a("2877"),f=Object(b["a"])(d,i,r,!1,null,null,null),p=f.exports,h={components:{AddAccound:p},data:()=>({accounts:[],fields:[],rows:[],pages:1,page:1,total:0,limit:10,fetching:!1}),computed:{...Object(c["c"])(["auth","catalogs"])},methods:{...Object(c["b"])({getStates:"catalogs/getStates"}),async getAccounts(t){const{data:e}=await getAccounts(t);return this.page=e.data.page,this.pages=e.data.pages,this.limit=e.data.limit,this.total=e.data.total,e.data.docs},async changePage(t){await this.reloadAccounts(t)},onClickRow(t,e){},edit(t){const e=this.accounts[t].id;this.$router.push("/admin/cuentas/"+e)},openNewAccountModal(){this.$modal.show("newAccount")},async newAccount(){this.accounts=this.reloadAccounts(1),this.$modal.hide("newAccount")},async reloadAccounts(t){this.fetching=!0,this.accounts=await this.getAccounts({page:t,populate:"city,state",limit:this.limit}),this.rows=this.accounts.map((t,e)=>{const a=(t.city||{}).name||"",o=(t.state||{}).name||"";return{"#":e+1,nombre:t.name,ciudad:a,ciudad:o,acciones:""}}),this.fetching=!1},async onError(t){this.$snack.danger({text:t.response.data.message})}},async mounted(){this.auth.accessToken||this.$router.push("/"),await this.reloadAccounts(1),await this.getStates(),this.fields=[{key:"#",sortable:!0},{key:"nombre",sortable:!0},{key:"ciudad",sortable:!0},{key:"estado",sortable:!0},{key:"acciones",sortable:!1}]}},g=h,v=Object(b["a"])(g,o,s,!1,null,null,null);e["default"]=v.exports},9943:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("AddAccound",{on:{newAccount:t.newAccount,error:t.onError}}),a("b-container",[a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{md:"9"}},[a("div",{staticClass:"p-3"},[a("h1",[t._v("Cuentas")]),a("b-pagination",{attrs:{"total-rows":t.total,"per-page":t.limit,"first-text":"Primera","prev-text":"Ant.","next-text":"Sig.","last-text":"Última",align:"right"},on:{change:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("b-table",{attrs:{busy:t.fetching,responsive:"",striped:"",hover:"",items:t.rows,fields:t.fields,"per-page":t.limit,"caption-top":""},on:{"row-dblclicked":t.onClickRow},scopedSlots:t._u([{key:"table-caption",fn:function(){return[a("b-button",{on:{click:t.openNewAccountModal}},[t._v(" Agregar cuenta ")])]},proxy:!0},{key:"cell(acciones)",fn:function(e){return["ADMIN"!==t.auth.user.role.code||t.fetching||"Root"===e.item.nombre?t._e():a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return a.preventDefault(),t.deleteItem(e.index)}}},[a("b-icon-trash")],1)]}}])})],1)])],1)],1)],1)},s=[],n=a("9a5b"),c=a("aca0"),i=a("2f62"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{staticClass:"modal--login",attrs:{name:"newAccount",adaptive:!0,scrollable:!0,height:"auto"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"p-3"},[a("h3",[t._v("Crear cuenta")]),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("b-form-group",[a("label",[t._v("Nombre de la cuenta")]),a("b-form-input",{model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("b-form-group",[a("label",[t._v("Nombre del usuario administrador")]),a("b-form-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",[a("label",[t._v("Email del administrador:")]),a("b-form-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("b-form-group",[a("label",[t._v("Teléfono del administrador:")]),a("b-form-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),a("b-form-group",[a("label",[t._v("Contraseña:")]),a("b-form-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-row",[a("b-col",[a("b-form-group",[a("label",[t._v("Estado:")]),a("b-form-select",{on:{change:t.getCities},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.catalogs.states,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1),a("b-col",[a("b-form-group",[a("label",[t._v("Ciudad:")]),a("b-form-select",{model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},t._l(t.cities,(function(e){return a("b-form-select-option",{key:e.uuid,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),a("b-row",[a("b-col",{staticStyle:{"text-align":"right"},attrs:{md:"6","offset-md":"6"}},[a("b-button",{attrs:{type:"submit"}},[t._v("Guardar")])],1)],1)],1)],1)])])])},l=[];const u={name:null,email:null,phone:"+52",account:null,city:null,state:null,password:null};var m={data:()=>({form:u,cities:[]}),computed:{...Object(i["c"])(["auth","catalogs"])},methods:{async getCities(t){const{data:e}=await Object(c["a"])(t);this.cities=e.data},async submit(t){try{const{data:e}=await Object(n["a"])({name:this.form.name,email:this.form.email,phone:this.form.phone,account:this.form.account,city:this.form.city,state:this.form.state,password:this.form.password});t.target.reset(),this.$emit("newAccount",e.data)}catch(e){this.$emit("error",e)}}}},d=m,b=a("2877"),f=Object(b["a"])(d,r,l,!1,null,null,null),p=f.exports,h={components:{AddAccound:p},data:()=>({accounts:[],fields:[],rows:[],pages:1,page:1,total:0,limit:10,fetching:!1}),computed:{...Object(i["c"])(["auth","catalogs"])},methods:{...Object(i["b"])({getStates:"catalogs/getStates"}),async getAccounts(t){const{data:e}=await Object(n["c"])(t);return this.page=e.data.page,this.pages=e.data.pages,this.limit=e.data.limit,this.total=e.data.total,e.data.docs},async changePage(t){await this.reloadAccounts(t)},onClickRow(t,e){},edit(t){const e=this.accounts[t].id;this.$router.push("/admin/cuentas/"+e)},openNewAccountModal(){this.$modal.show("newAccount")},async newAccount(){this.accounts=this.reloadAccounts(1),this.$modal.hide("newAccount")},async reloadAccounts(t){this.fetching=!0,this.accounts=await this.getAccounts({page:t,populate:"city,state",limit:this.limit}),this.rows=this.accounts.map((t,e)=>{const a=(t.city||{}).name||"",o=(t.state||{}).name||"";return{"#":e+1,nombre:t.name,ciudad:a,estado:o,acciones:""}}),this.fetching=!1},async onError(t){this.$snack.danger({text:t.response.data.message})}},async mounted(){this.auth.accessToken||this.$router.push("/"),await this.reloadAccounts(1),await this.getStates(),this.fields=[{key:"#",sortable:!0},{key:"nombre",sortable:!0},{key:"ciudad",sortable:!0},{key:"estado",sortable:!0},{key:"acciones",sortable:!1}]}},g=h,v=Object(b["a"])(g,o,s,!1,null,null,null);e["default"]=v.exports},"9a5b":function(t,e,a){"use strict";a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return r}));var o=a("780a"),s=a("b383"),n=a.n(s);function c(t={}){return o["a"].get("/accounts?"+n.a.encode(t))}function i(t,e={}){return o["a"].get(`/accounts/${t}?${n.a.encode(e)}`)}function r({account:t,name:e,state:a,city:s,email:n,phone:c,password:i}){return o["a"].post("/accounts",{account:t,name:e,state:a,city:s,email:n,phone:c,password:i})}},cdd0:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("b-container",[a("h1",[t._v("Mis datos")]),a("b-row",{attrs:{"align-content":"center"}},[a("b-col",{attrs:{cols:"6"}},[a("b-form",{attrs:{disabled:""}},[a("b-form-group",{attrs:{label:"Nombre:","label-for":"name"}},[a("b-form-input",{attrs:{disabled:"",id:"name",type:"text",required:""},model:{value:t.auth.user.name,callback:function(e){t.$set(t.auth.user,"name",e)},expression:"auth.user.name"}})],1),a("b-form-group",{attrs:{label:"Email:","label-for":"email"}},[a("b-form-input",{attrs:{disabled:"",id:"email",type:"text",required:""},model:{value:t.auth.user.email,callback:function(e){t.$set(t.auth.user,"email",e)},expression:"auth.user.email"}})],1),a("b-form-group",{attrs:{label:"Teléfono:","label-for":"phone"}},[a("b-form-input",{attrs:{disabled:"",id:"phone",type:"text",required:""},model:{value:t.auth.user.phone,callback:function(e){t.$set(t.auth.user,"phone",e)},expression:"auth.user.phone"}})],1),t.auth.user.state?a("b-form-group",{attrs:{label:"Estado:","label-for":"state"}},[a("b-form-input",{attrs:{disabled:"",id:"state",type:"text",required:""},model:{value:t.auth.user.state.name,callback:function(e){t.$set(t.auth.user.state,"name",e)},expression:"auth.user.state.name"}})],1):t._e(),t.auth.user.city?a("b-form-group",{attrs:{label:"Ciudad:","label-for":"city"}},[a("b-form-input",{attrs:{disabled:"",id:"city",type:"text",required:""},model:{value:t.auth.user.city.name,callback:function(e){t.$set(t.auth.user.city,"name",e)},expression:"auth.user.city.name"}})],1):t._e(),t.auth.user.account&&"Public"!==t.auth.user.account.name?a("b-form-group",{attrs:{label:"Cuenta:","label-for":"city"}},[a("b-form-input",{attrs:{disabled:"",id:"city",type:"text",required:""},model:{value:t.auth.user.account.name,callback:function(e){t.$set(t.auth.user.account,"name",e)},expression:"auth.user.account.name"}})],1):t._e()],1)],1)],1)],1)],1)},s=[],n=a("2f62"),c={computed:{...Object(n["c"])(["auth"])},mounted(){this.auth.user||this.$router.push("/")}},i=c,r=a("2877"),l=Object(r["a"])(i,o,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=perfil.465ede43.js.map