{"version":3,"sources":["webpack:///./src/pages/user/Complaints.vue?d6fa","webpack:///src/pages/user/Complaints.vue","webpack:///./src/pages/user/Complaints.vue?5751","webpack:///./src/pages/user/Complaints.vue","webpack:///./src/pages/complaints/Detail.vue?a610","webpack:///src/pages/complaints/Detail.vue","webpack:///./src/pages/complaints/Detail.vue?e126","webpack:///./src/pages/complaints/Detail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","total","limit","on","changePage","model","value","callback","$$v","page","expression","fetching","rows","fields","onClickRow","scopedSlots","_u","key","fn","proxy","data","$event","preventDefault","edit","index","auth","user","role","code","_e","deleteItem","staticRenderFns","complaints","pages","computed","methods","populate","response","docs","map","complaint","city","name","state","position","cargo","candidato","candidate","partido","party","ciudad","estado","acciones","getComplaints","_record","id","getId","$router","push","$snack","danger","text","err","message","component","onSubmit","$set","_l","catalogs","uuid","_s","getCities","cities","result","complait","updateComplaint","success","error","getComplaint","$route","params","getStates","getParties","getPositions"],"mappings":"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","file":"js/reportes.66345f34.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('b-container',[_c('div',{staticClass:\"p-3\"},[_c('h1',[_vm._v(\"Reportes\")]),_c('b-pagination',{attrs:{\"total-rows\":_vm.total,\"per-page\":_vm.limit,\"first-text\":\"Primera\",\"prev-text\":\"Ant.\",\"next-text\":\"Sig.\",\"last-text\":\"Última\",\"align\":\"right\"},on:{\"change\":_vm.changePage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('b-table',{attrs:{\"busy\":_vm.fetching,\"responsive\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.rows,\"fields\":_vm.fields,\"per-page\":_vm.limit,\"caption-top\":\"\"},on:{\"row-dblclicked\":_vm.onClickRow},scopedSlots:_vm._u([{key:\"table-caption\",fn:function(){return [_vm._v(\"Dar doble clic para editar.\")]},proxy:true},{key:\"cell(acciones)\",fn:function(data){return [_c('b-button',{staticClass:\"mr-1\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){$event.preventDefault();return _vm.edit(data.index)}}},[_c('b-icon-pencil-square')],1),(_vm.auth.user.role.code === 'ADMIN' && !_vm.fetching)?_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"danger\"},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteItem(data.index)}}},[_c('b-icon-trash')],1):_vm._e()]}}])})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <b-container>\n      <div class=\"p-3\">\n        <h1>Reportes</h1>\n        <b-pagination\n          :total-rows=\"total\"\n          :per-page=\"limit\"\n          first-text=\"Primera\"\n          prev-text=\"Ant.\"\n          next-text=\"Sig.\"\n          last-text=\"Última\"\n          align=\"right\"\n          v-model=\"page\"\n          @change=\"changePage\"\n        ></b-pagination>\n        <b-table :busy=\"fetching\" responsive striped hover :items=\"rows\" :fields=\"fields\" :per-page=\"limit\" @row-dblclicked=\"onClickRow\" caption-top>\n          <template #table-caption>Dar doble clic para editar.</template>\n          <template #cell(acciones)=\"data\">\n            <b-button size=\"sm\" @click.prevent=\"edit(data.index)\" class=\"mr-1\">\n              <b-icon-pencil-square />\n            </b-button>\n            <b-button v-if=\"auth.user.role.code === 'ADMIN' && !fetching\" size=\"sm\" variant=\"danger\" @click.prevent=\"deleteItem(data.index)\">\n              <b-icon-trash />\n            </b-button>\n          </template>\n        </b-table>\n      </div>\n    </b-container>\n  </div>\n</template>\n\n<script>\n\nimport { getComplaints, deleteComplaint } from '@/services/complaints'\nimport { mapState } from 'vuex';\n\nexport default {\n  data: ()=> ({\n    complaints: [],\n    fields: [],\n    rows: [],\n    pages: 1,\n    page: 1,\n    total: 0,\n    limit: 10,\n    fetching: false\n  }),\n  computed:{\n    ...mapState(['auth'])\n  },\n  methods: {\n    async getComplaints(page) {\n      this.fetching = true\n      this.page = page;\n      this.fetching = true\n      const {data: response} = await getComplaints({\n        page,\n        populate: 'city,state,position,user',\n        limit: this.limit,\n      })\n      this.complaints = response.data.docs;\n      this.rows = this.complaints.map((complaint, index) => {\n        const city = (complaint.city || {}).name || ''\n        const state = (complaint.state || {}).name || ''\n        const position = (complaint.position || {}).name || ''\n        return {\n          '#': index + 1,\n          cargo: position,\n          candidato: complaint.candidate,\n          partido: complaint.party,\n          ciudad: city,\n          estado: state,\n          acciones: ''\n        }\n      })\n\n      this.fields = [\n        {key: '#', sortable: true},\n        {key: 'cargo', sortable: true},\n        {key: 'candidato', sortable: true},\n        {key: 'partido', sortable: true},\n        {key: 'ciudad', sortable: true},\n        {key: 'estado', sortable: true},\n        {key: 'acciones', sortable: false},\n      ]\n\n      this.pages = response.data.pages;\n      this.total = response.data.total;\n      this.page = response.data.page;\n      this.limit = response.data.limit;\n      this.fetching = false\n    },\n    async changePage(page) {\n      this.getComplaints(page);\n    },\n    onClickRow(_record, index) {\n      const id = this.getId(index)\n      this.$router.push(`/admin/reportes/${id}`)\n    },\n    edit(index){\n      const id = this.getId(index)\n      this.$router.push(`/admin/reportes/${id}`)\n    },\n    getId(index) {\n      return this.complaints[index].id\n    },\n    async deleteItem(index){\n      const id = this.getId(index)\n      this.fetching = true\n      try {\n        await deleteComplaint(id)\n        this.getComplaints(this.page)\n      } catch (err) {\n        this.$snack.danger({\n          text: err.message\n        })\n      } finally {\n        this.fetching = false\n      }\n    }\n  },\n  async mounted() {\n    await this.getComplaints(this.page)\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Complaints.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Complaints.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Complaints.vue?vue&type=template&id=1a3227f1&\"\nimport script from \"./Complaints.vue?vue&type=script&lang=js&\"\nexport * from \"./Complaints.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.complaint)?_c('div',{staticClass:\"page\"},[_c('b-container',[_c('b-row',{staticClass:\"pt-2 pb-2\"},[_c('b-col',[_c('router-link',{attrs:{\"to\":\"/admin/reportes\"}},[_c('b-icon-arrow-left'),_vm._v(\" Ir al listado \")],1)],1)],1),_c('b-row',[_c('b-col',[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Candidato a denunciar:\"}},[_c('b-form-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.complaint.candidate),callback:function ($$v) {_vm.$set(_vm.complaint, \"candidate\", $$v)},expression:\"complaint.candidate\"}})],1)],1)],1),_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Campaña:\"}},[_c('b-form-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.complaint.campaign),callback:function ($$v) {_vm.$set(_vm.complaint, \"campaign\", $$v)},expression:\"complaint.campaign\"}})],1)],1)],1),_c('b-row',[_c('b-form-group',{staticClass:\"position-fields\"},_vm._l((_vm.catalogs.positions),function(position){return _c('b-form-radio',{key:position.uuid,attrs:{\"name\":\"position\",\"value\":position.id},model:{value:(_vm.complaint.position),callback:function ($$v) {_vm.$set(_vm.complaint, \"position\", $$v)},expression:\"complaint.position\"}},[_vm._v(_vm._s(position.name))])}),1)],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"6\",\"sm\":\"12\",\"xs\":\"12\"}},[_c('label',[_vm._v(\"Estado:\")]),_c('b-form-select',{on:{\"change\":_vm.getCities},model:{value:(_vm.complaint.state),callback:function ($$v) {_vm.$set(_vm.complaint, \"state\", $$v)},expression:\"complaint.state\"}},_vm._l((_vm.catalogs.states),function(state){return _c('b-form-select-option',{key:state.uuid,attrs:{\"value\":state.id}},[_vm._v(\" \"+_vm._s(state.name)+\" \")])}),1)],1),_c('b-col',{attrs:{\"md\":\"6\",\"sm\":\"12\",\"xs\":\"12\"}},[_c('label',[_vm._v(\"Ciudad:\")]),_c('b-form-select',{model:{value:(_vm.complaint.city),callback:function ($$v) {_vm.$set(_vm.complaint, \"city\", $$v)},expression:\"complaint.city\"}},_vm._l((_vm.cities),function(city){return _c('b-form-select-option',{key:city.uuid,attrs:{\"value\":city.id}},[_vm._v(\" \"+_vm._s(city.name)+\" \")])}),1)],1)],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"6\",\"sm\":\"12\",\"xs\":\"12\"}},[_c('label',[_vm._v(\"Partido:\")]),_c('b-form-input',{staticClass:\"mb-2\",model:{value:(_vm.complaint.party),callback:function ($$v) {_vm.$set(_vm.complaint, \"party\", $$v)},expression:\"complaint.party\"}})],1)],1),_c('b-row',[_c('b-col',[_c('label',[_vm._v(\"Fecha del evento:\")]),_c('b-form-datepicker',{staticClass:\"mb-2\",model:{value:(_vm.complaint.eventDateTime),callback:function ($$v) {_vm.$set(_vm.complaint, \"eventDateTime\", $$v)},expression:\"complaint.eventDateTime\"}})],1)],1),_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('label',[_vm._v(\"¿Qué quieres denunciar?\")]),_c('b-form-textarea',{attrs:{\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.complaint.description),callback:function ($$v) {_vm.$set(_vm.complaint, \"description\", $$v)},expression:\"complaint.description\"}})],1),_c('b-col',{attrs:{\"md\":\"6\",\"xs\":\"12\"}},[_c('div',{staticClass:\"p-2\"},[_c('p',[_vm._v(\" Esta es una plataforma privada, para cualquier comentario o información al respecto contactar a \"),_c('a',{attrs:{\"href\":\"mailto:jacinto.herrera@asacsc.com.mx\"}},[_vm._v(\"jacinto.herrera@asacsc.com.mx\")])]),_c('p',[_vm._v(\" Si quieres que tu candidato utilice esta plataforma contáctanos. \")])])]),_c('b-col',{staticClass:\"complaint-files\",attrs:{\"md\":\"6\",\"xs\":\"12\"}},[_c('b-form-file',{attrs:{\"multiple\":\"\",\"placeholder\":\"Subir archivos\"},model:{value:(_vm.complaint.files),callback:function ($$v) {_vm.$set(_vm.complaint, \"files\", $$v)},expression:\"complaint.files\"}},[_vm._v(\"Subir pruebas\")])],1)],1),_c('b-row',[_c('b-button',{staticClass:\"primary-button\",attrs:{\"disabled\":this.fetching,\"type\":\"submit\"}},[_vm._v(\"Enviar\")])],1)],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page\" v-if=\"complaint\">\n    <b-container>\n\n      <b-row class=\"pt-2 pb-2\">\n        <b-col>\n          <router-link to=\"/admin/reportes\">\n            <b-icon-arrow-left /> Ir al listado\n          </router-link>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col>\n          <b-form @submit.prevent=\"onSubmit\">\n          <b-row>\n            <b-col>\n              <b-form-group label=\"Candidato a denunciar:\">\n                <b-form-input v-model=\"complaint.candidate\" type=\"text\" ></b-form-input>\n              </b-form-group>\n            </b-col>\n          </b-row>\n           <b-row>\n            <b-col>\n              <b-form-group label=\"Campaña:\">\n                <b-form-input v-model=\"complaint.campaign\" type=\"text\" ></b-form-input>\n              </b-form-group>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-form-group class=\"position-fields\">\n              <b-form-radio v-model=\"complaint.position\" name=\"position\" v-for=\"position in catalogs.positions\" :key=\"position.uuid\" :value=\"position.id\">{{position.name}}</b-form-radio>\n            </b-form-group>\n          </b-row>\n          <b-row>\n            <b-col md=\"6\" sm=\"12\" xs=\"12\">\n              <label>Estado:</label>\n              <b-form-select v-model=\"complaint.state\" @change=\"getCities\">\n                <b-form-select-option v-for=\"state in catalogs.states\" :key=\"state.uuid\" :value=\"state.id\">\n                  {{state.name}}\n                </b-form-select-option>\n              </b-form-select>\n            </b-col>\n            <b-col md=\"6\" sm=\"12\" xs=\"12\">\n              <label>Ciudad:</label>\n              <b-form-select v-model=\"complaint.city\">\n                <b-form-select-option v-for=\"city in cities\" :key=\"city.uuid\" :value=\"city.id\">\n                  {{city.name}}\n                </b-form-select-option>\n              </b-form-select>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col md=\"6\" sm=\"12\" xs=\"12\">\n              <label>Partido:</label>\n              <b-form-input v-model=\"complaint.party\" class=\"mb-2\"></b-form-input>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <label>Fecha del evento:</label>\n              <b-form-datepicker v-model=\"complaint.eventDateTime\" class=\"mb-2\"></b-form-datepicker>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col cols=\"12\">\n              <label>¿Qué quieres denunciar?</label>\n              <b-form-textarea\n                v-model=\"complaint.description\"\n                rows=\"3\"\n                max-rows=\"6\"\n              ></b-form-textarea>\n            </b-col>\n            <b-col md=\"6\" xs=\"12\">\n              <div class=\"p-2\">\n                <p>\n                  Esta es una plataforma privada, para cualquier comentario o información al respecto contactar a\n                  <a href=\"mailto:jacinto.herrera@asacsc.com.mx\">jacinto.herrera@asacsc.com.mx</a>\n                </p>\n                <p>\n                  Si quieres que tu candidato utilice esta plataforma contáctanos.\n                </p>\n              </div>\n            </b-col>\n            <b-col md=\"6\" xs=\"12\" class=\"complaint-files\">\n              <b-form-file multiple v-model=\"complaint.files\" placeholder=\"Subir archivos\">Subir pruebas</b-form-file>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-button class=\"primary-button\" :disabled=\"this.fetching\" type=\"submit\">Enviar</b-button>\n          </b-row>\n        </b-form>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\n\nimport { getComplaint, updateComplaint } from '@/services/complaints'\nimport { getCities } from '@/services/geo'\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n  data: () => ({\n    complaint: {},\n    cities: [],\n    fetching: false\n  }),\n  computed:{\n    ...mapState(['auth', 'catalogs']),\n  },\n  methods: {\n    ...mapActions({\n      'getStates': 'catalogs/getStates',\n      'getParties': 'catalogs/getParties',\n      'getPositions': 'catalogs/getPositions',\n      'createComplaint': 'complaints/create'\n    }),\n    async getComplaint(id) {\n      const {data: response} = await getComplaint(id)\n      return response.data\n    },\n    async getCities(state) {\n      const {data: result} = await getCities(state);\n      this.cities = result.data;\n    },\n    async updateComplaint(id, data) {\n      this.complait = await updateComplaint(id, data)\n    },\n    async onSubmit() {\n      this.fetching = true\n      try {\n        await this.updateComplaint(this.complaint.id, this.complaint)\n        this.$snack.success({\n          text: 'El reporte fue actualizado con éxito.'\n        });\n        this.$router.push('/admin/reportes')\n      } catch (err) {\n        this.$snack.danger({\n          text: error.message\n        })\n      } finally {\n        this.fetching = false\n      }\n    }\n  },\n  async mounted() {\n    this.complaint = await this.getComplaint(this.$route.params.id)\n    await this.getStates()\n    await this.getCities(this.complaint.state)\n    await this.getParties()\n    await this.getPositions()\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=f1e89dc4&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}